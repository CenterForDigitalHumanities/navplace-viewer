<!DOCTYPE html>
<!--
@author Bryan Haberberger
https://github.com/thehabes
-->
<html>
    <head>
        <title>navPlace Viewer</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://unpkg.com/chota@latest">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
           integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
           crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
           integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
           crossorigin=""></script>
        <script src="./app.js" type="module"></script>
        <link rel="stylesheet" href="./app.css" />
        <link rel="icon" type="image/x-icon" href="./images/globeicon.jpg">
    </head>
    <body>
        <header>
            <div class="row">
                <div class="two columns">
                    <!-- This could go off to iiif.io -->
                    <a href="index.html"><img src="./images/iiif-logo.jpg" alt="logo" class="u-full-width"></a>
                </div>
                <h1 class="ten columns">
                    <div class="regular-header-text">International Image Interoperability Framework</div>
                    <br class="savespace">
                    <div class="small-header-text">navPlace Viewer</div>
                </h1>
            </div>
        </header>
        <div class="container">
            <p class="howTo" id='howTo'> 
                Provide a IIIF Collection, Manifest, Range or Canvas URL with the IIIF Content State URL parameter ?iiif-content={url}.
                Pan and zoom are supported.  <a onclick="VIEWER.mymap.flyTo([12,12],2)">[Shift] + [Z]</a> will zoom out for a holistic view.
                Clicking any point on the map will show applicable information about the target when the URI is resolvable.
            </p>
            <p class="howTo"> 
                The shapes drawn below will have different colors.  Those colors represent the type of resource the coordinates are on.
                <ul class="howTo">
                    <li><span style="color:blue;">Collection</span>: Blue</li>
                    <li><span style="color:purple;">Manifest</span>: Purple</li>
                    <li><span style="color:yellow;">Range</span>: Yellow</li>
                    <li><span style="color:#008080;">Canvas</span>: Teal</li>
                    <li><span style="color:red;">Unknown</span>: Red</li>
                </ul>
            </p>
            <div id="leafletInstanceContainer">
                <div id="loadingMessage" style="text-align: center;">Gathering Resource Data From Around The World...</div>
            </div>
            <div style="display: none;" class="card">
                <header>Supply a latitude and longitude to fly to.  Last Supplied Coordinates <span id="currentCoords">[]</span></header>
                <div class="card_body">
                    <div class="grouped">
                        <div><label>Latitude</label><input id="leafLat" step=".000001" type="number" /></div>
                        <div><label>Longitude</label><input id="leafLong" step=".000001" type="number" /></div>
                    </div>
                </div>
<!--                 <footer>
                    <input id='goToCoords' value="Go To Coordinates" type="button" class="tag is-small" onclick="VIEWER.goToCoords(event)"/>
                </footer> -->
            </div>
        </div>
        <footer class="nav nav-center text-primary is-fixed is-full-width, is-vertical-align">
            <div>
                <a target="_blank" href="https://www.slu.edu/research/faculty-resources/research-computing.php">
                    <img class="brand" src="./images/rcg-logo.jpg"/> <small>&copy;2022 Research Computing Group </small>
                </a>
            </div>
            <div>
                <a target="_blank" href="http://iiif.io">
                    <img class="brand" src="https://iiif.io/assets/images/logos/logo-sm.png"><small>International Image Interoperability Framework</small>
                </a>
            </div>
        </footer>
    </body>
    <script>
        /**
         * Use Shift + Z to zoom out and use Africa to orient yourself.
         */
        document.addEventListener("keydown", function(event){
            let key;
            let isShift;
            if (window.event) {
              key = event.keyCode;
              isShift = !!event.shiftKey; // typecast to boolean
            } 
            else {
              key = event.which;
              isShift = !!event.shiftKey;
            }
            if ( isShift ) {
                switch (key) {
                  case 90: 
                      VIEWER.mymap.flyTo([12,12],2)
                    break
                  default:
                }
              }
        })

        /**
         * Helps with initial orientation on page loads
         */     
        window.onbeforeunload = function () {
            window.scrollTo(0,0);
        }

        
    </script>
</html>
